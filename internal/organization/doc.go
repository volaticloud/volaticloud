/*
Package organization provides organization management functionality.

# Responsibilities

  - Organization creation and validation
  - Title validation and sanitization
  - Keycloak resource lifecycle management
  - Integration with UMA 2.0 authorization

# Architecture

	┌──────────────────┐
	│ GraphQL Resolver │
	└────────┬─────────┘
	         │
	         ▼
	┌─────────────────────┐
	│ organization.Create │
	└────────┬────────────┘
	         │
	         ├──▶ validateTitle
	         ├──▶ AdminClient.CreateResource (Keycloak)
	         └──▶ AdminClient.ChangeUserRole (Keycloak)

# Keycloak Entity Creation Order

For organizations, entities are created in this order:

 1. Native Keycloak Organization (source of truth, generates ID)
 2. Keycloak Group with role subgroups (uses org ID as name)
 3. UMA Resource (uses org ID as name)

The organization ID is generated by Keycloak's Native Organization API,
ensuring a single source of truth for organization identifiers.

# Rollback Strategy

If role assignment fails after resource creation, the package automatically
rolls back by deleting the created organization resource to prevent orphaned
resources in Keycloak. The Keycloak extension handles cascading cleanup of
all related entities (Native Organization, Group, UMA Resource).

# Usage

	import "volaticloud/internal/organization"

	response, err := organization.Create(ctx, organization.CreateRequest{
	    Title:  "My Organization",
	    UserID: userCtx.UserID,
	})

# Validation Rules

  - Title is required (non-empty after trimming)
  - Title maximum length: 100 characters
  - Control characters (ASCII < 32 or DEL) are rejected for security

# Related ADRs

  - ADR-0008: Multi-Tenant Authorization with UMA 2.0
*/
package organization
