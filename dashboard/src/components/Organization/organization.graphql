query OrganizationUsers($organizationId: String!) {
  organizationUsers(organizationId: $organizationId) {
    id
    username
    email
    emailVerified
    firstName
    lastName
    enabled
    createdAt
  }
}

query OrganizationGroupTree($organizationId: String!) {
  organizationGroupTree(organizationId: $organizationId) {
    id
    name
    path
    type
    title
    children {
      id
      name
      path
      type
      title
      children {
        id
        name
        path
        type
        title
        children {
          id
          name
          path
          type
          title
        }
      }
    }
  }
}

query GroupMembers($organizationId: String!, $groupId: String!) {
  groupMembers(organizationId: $organizationId, groupId: $groupId) {
    id
    username
    email
    emailVerified
    firstName
    lastName
    enabled
    createdAt
  }
}

query ResourceGroups(
  $organizationId: String!
  $where: ResourceGroupWhereInput
  $orderBy: ResourceGroupOrder
  $first: Int
  $offset: Int
) {
  resourceGroups(
    organizationId: $organizationId
    where: $where
    orderBy: $orderBy
    first: $first
    offset: $offset
  ) {
    edges {
      node {
        name
        path
        title
        type
        roles {
          name
          memberCount
        }
        totalMembers
        hasChildren
      }
      cursor
    }
    totalCount
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
  }
}

query ResourceGroupMembers(
  $organizationId: String!
  $resourceGroupId: String!
  $where: ResourceGroupMemberWhereInput
  $orderBy: ResourceGroupMemberOrder
  $first: Int
  $offset: Int
) {
  resourceGroupMembers(
    organizationId: $organizationId
    resourceGroupId: $resourceGroupId
    where: $where
    orderBy: $orderBy
    first: $first
    offset: $offset
  ) {
    edges {
      node {
        user {
          id
          username
          email
          emailVerified
          firstName
          lastName
          enabled
          createdAt
        }
        roles
        primaryRole
      }
      cursor
    }
    totalCount
    availableRoles
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
  }
}

mutation InviteOrganizationUser($organizationId: ID!, $input: InviteUserInput!) {
  inviteOrganizationUser(organizationId: $organizationId, input: $input) {
    id
    email
    firstName
    lastName
    organizationId
    status
    createdAt
    expiresAt
  }
}

mutation ChangeOrganizationUserRole($organizationId: ID!, $userId: ID!, $newRole: String!) {
  changeOrganizationUserRole(organizationId: $organizationId, userId: $userId, newRole: $newRole)
}

mutation CreateOrganization($title: String!) {
  createOrganization(title: $title) {
    id
    title
  }
}