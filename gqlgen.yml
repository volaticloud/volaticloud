# Schema files - scalars.graphql must be first to define Time, Map, Cursor
# before they are referenced by types in ent.graphql
# See: https://gqlgen.com/reference/scalars/
schema:
  - internal/graph/scalars.graphql
  - internal/graph/ent.graphql
  - internal/graph/schema.graphqls

# Generated code locations
exec:
  filename: internal/graph/generated.go
  package: graph

# Directive configuration
directives:
  isAuthenticated:
    skip_runtime: false
  hasScope:
    skip_runtime: false
  requiresPermission:
    skip_runtime: false

# Skip model generation - using ENT models directly
model:
  filename: internal/graph/model/models_gen.go
  package: model

resolver:
  layout: follow-schema
  dir: internal/graph
  package: graph
  filename_template: "{name}.resolvers.go"
  omit_template_comment: true

# Autobind ENT types, runner types, Freqtrade types, and backtest types
autobind:
  - volaticloud/internal/ent
  - volaticloud/internal/runner
  - volaticloud/internal/freqtrade
  - volaticloud/internal/backtest

# Type mappings
models:
  ID:
    model:
      - volaticloud/internal/ent/schema/uuidgql.UUID

  UUID:
    model:
      - github.com/google/uuid.UUID

  Time:
    model:
      - github.com/99designs/gqlgen/graphql.Time

  Map:
    model:
      - github.com/99designs/gqlgen/graphql.Map

  # Node interface from ENT
  Node:
    model:
      - volaticloud/internal/ent.Noder

  # Map ENT types to GraphQL
  Exchange:
    model:
      - volaticloud/internal/ent.Exchange

  Strategy:
    model:
      - volaticloud/internal/ent.Strategy

  Bot:
    model:
      - volaticloud/internal/ent.Bot

  Backtest:
    model:
      - volaticloud/internal/ent.Backtest

  HyperOpt:
    model:
      - volaticloud/internal/ent.HyperOpt

  Trade:
    model:
      - volaticloud/internal/ent.Trade

  # Map runner types to GraphQL
  BotStatus:
    model:
      - volaticloud/internal/runner.BotStatus
